<!-- DOCUMENTS -->
<!-- Collapsible wrapper -->
<div class="panel-group">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h4 class="panel-title">
                <span class="panel_header_element"><a data-toggle="collapse" href="#infoCee">Processus CEE</a></span>
                <span class="panel_header_element"><a data-toggle="collapse" href="#infoCee"><i class="glyphicon glyphicon-repeat"></i></a></span>
            </h4>
        </div>

        <div id="infoCee" class="panel-collapse collapse in">
            <div class="panel-body">

                <div class="fiches_area">
                    <div class="row">

                        <!-- processus_card -->
                        <section id="processusCard" class="pb-5">
                            <!-- processus_card member -->
                            <div class="col-xs-12 col-sm-6 col-md-2 card-test">
                                <div class="stepwizard-step text-center">
                                    <a href="javascript:void(0);" type="button" class="btn btn-default btn-circle">1</a>                                
                                </div>
                                <div class="card card-green">
                                    <div class='icon-header glyphicon glyphicon-fire'></div>
                                    <p class="card-question">Convention</p>
                                    <div class="card-separator"></div>
                                    <p style="text-align:center;">Étape 1 à fournir par la MOA</p>
                                </div>
                            </div>
                            <!-- ./processus_card member -->
                            <!-- processus_card member -->
                            <div class="col-xs-12 col-sm-6 col-md-2 card-test">
                                <div class="stepwizard-step">
                                    <a href="javascript:void(0);" type="button" class="btn btn-default btn-circle">2</a>                                
                                </div>
                                <div class="card card-green">
                                    <div class='icon-header glyphicon glyphicon-folder-open'></div>
                                    <p class="card-question">Dépôt de documents</p>
                                    <div class="card-separator"></div>
                                    <p style="text-align:center;">Étape 2 à fournir par la MOA</p>
                                </div>
                            </div>
                            <!-- ./processus_card member -->
                            <!-- processus_card member -->
                            <div class="col-xs-12 col-sm-6 col-md-2 card-test">
                                <div class="stepwizard-step text-center">
                                    <a href="javascript:void(0);" type="button" class="btn btn-default btn-circle">3</a>
                                </div>
                                <div class="card card-green">
                                    <div class='icon-header glyphicon glyphicon-file'></div>
                                    <p class="card-question">Évaluation du dossier</p>
                                    <div class="card-separator"></div>
                                    <p style="text-align:center;">Étape 3 à fournir par la MOA</p>
                                </div>
                            </div>
                            <!-- ./processus_card member -->
                            <!-- processus_card member -->
                            <div class="col-xs-12 col-sm-6 col-md-2 card-test">
                                <div class="stepwizard-step text-center">
                                    <a href="javascript:void(0);" type="button" class="btn btn-default btn-circle">4</a>
                                </div>

                                <div class="card card-green">
                                    <div class='icon-header glyphicon glyphicon-check'></div>
                                    <p class="card-question">Approbation du dossier</p>
                                    <div class="card-separator"></div>
                                    <p style="text-align:center;">Étape 4 à fournir par la MOA</p>
                                </div>
                            </div>
                            <!-- ./processus_card member -->
                            <!-- processus_card member -->
                            <div class="col-xs-12 col-sm-6 col-md-2 card-test">
                                <div class="stepwizard-step text-center">
                                    <a href="javascript:void(0);" type="button" class="btn btn-default btn-circle">5</a>
                                </div>

                                <div class="card card-green">
                                    <div class='icon-header glyphicon glyphicon-wrench'></div>
                                    <p class="card-question">Exécution des travaux</p>
                                    <div class="card-separator"></div>
                                    <p style="text-align:center;">Étape 5 à fournir par la MOA</p>
                                </div>
                            </div>
                            <!-- ./processus_card member -->
                            <!-- processus_card member -->
                            <div class="col-xs-12 col-sm-6 col-md-2 card-test">
                                <div class="stepwizard-step text-center">
                                    <a href="javascript:void(0);" type="button" class="btn btn-default btn-circle">6</a>
                                </div>

                                <div class="card card-green">
                                    <div class='icon-header glyphicon glyphicon-eur'></div>
                                    <p class="card-question">Paiement</p>
                                    <div class="card-separator"></div>
                                    <p style="text-align:center;">Étape 6 à fournir par la MOA</p>
                                </div>
                            </div>
                            <!-- ./processus_card member -->
                        </section>
                    </div>
                </div>

            <!-- Closing collapsible wrapper -->
            </div>
        </div>
    </div>
</div>

<!-- DOCUMENTS -->
<div class="panel-group">
    <div class="panel panel-default">
    <div class="panel-heading">
        <h4 class="panel-title">
            <span class="panel_header_element"><a data-toggle="collapse" href="#collapseConsulterFiche">Fiches</a></span>
            <span class="panel_header_element"><a data-toggle="collapse" href="#collapseConsulterFiche"><i class="glyphicon glyphicon-save-file"></i></a></span>
        </h4>
    </div>
        <div id="collapseConsulterFiche" class="panel-collapse collapse in">
            <div class="panel-body">
                <span class="consulterFiche">Consulter les fiches : <a class="aLink" target="_blank" href="http://calculateur-cee.ademe.fr/user/fiches/BAR">ADEME CEE</a></span>

            <div class="kits">
                <div class="col-md-4 input_holder">
                    <div class="form-group">
                        <span class="form_label"><label for="ChoisirKits">Kits</label></span> 
                        <span class="form_input" > 
                            <select class="form-control">
                                <option value='0'>Choisir opération/ fiche</option>
                                <option value='1'>Kits 1</option>
                                <option value='2'>Kits 2</option>
                                <option value='3'>Kits 3</option>
                                <option value='4'>Kits 4</option>
                            </select>
                        </span>
                    </div>
                </div>
                <div class="col-md-4 visualiserKit">
                    <span class="panel_header_element"><a>Kits</a></span>
                    <span class="panel_header_element"><a><i class="glyphicon glyphicon-download-alt" rel="tooltip" title="Télécharger kit"></i></a></span>
                </div>
            </div>

        </div>
    </div>
</div>
</div>

<div class="panel-group">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h4 class="panel-title">
                <span class="panel_header_element"><a data-toggle="collapse" href="#collapseDocuments">Documents</a></span>
                <span class="panel_header_element"><a data-toggle="collapse" href="#collapseDocuments"><i class="glyphicon glyphicon-save-file"></i></a></span>
            </h4>
        </div>

        <div id="collapseDocuments" class="panel-collapse collapse in">
            <div class="panel-body">

                <div class="numberlist">
                    <div id="tab-container" aria-multiselectable="false" class="tabs-view">
                        <ul class="nav nav-pills nav-stacked col-md-4" id="navlist" role="tablist">
                            <li role="presentation">
                            <a class="expand" role="tab" id="one" aria-setsize="3" aria-posinset="1" tabindex="0" href="javascript:void(0);" aria-controls="panel-1" aria-selected="false">Convention mandat</a>
                            </li>
                            <li role="presentation">
                            <a class="expand" role="tab" id="two" aria-setsize="3" aria-posinset="2" tabindex="-1" href="javascript:void(0);" aria-controls="panel-2" aria-selected="false">AH</a>
                            </li>
                            <li role="presentation">
                            <a class="expand" role="tab" id="three" aria-setsize="3" aria-posinset="3" tabindex="-1" href="javascript:void(0);" aria-controls="panel-3" aria-selected="false">ER</a>
                            </li>
                                <li role="presentation">
                            <a class="expand" role="tab" id="four" aria-setsize="3" aria-posinset="4" tabindex="-1" href="javascript:void(0);" aria-controls="panel-4" aria-selected="false">Autre</a>
                            </li>
                                <li role="presentation">
                            <a class="expand" role="tab" id="five" aria-setsize="3" aria-posinset="5" tabindex="-1" href="javascript:void(0);" aria-controls="panel-5" aria-selected="false">Autre</a>
                            </li>
                        </ul>
                        <div id="panels" class="tab-content col-md-6 displayed">
                            <div role="tabpanel" aria-labelledby="one" class="panel current" tabindex="-1" id="panel-1">
                                <h4>Convention Mandat</h4>
                                <p>
                                    <i>Information à fournir par la MOA</i><br /><br />
                                    Qu'est ce que c'est ?
                                    <br />
                                    A quoi ça sert ?
                                    <br />
                                    Pourquoi c'est important ?
                                </p>
                            </div>
                            <div aria-hidden="true" class="panel" role="tabpanel" aria-labelledby="two" tabindex="-1" id="panel-2">
                                <h4>AH</h4>
                                <p>
                                    <i>Information à fournir par la MOA</i><br /><br />
                                    Qu'est ce que c'est ?
                                    <br />
                                    A quoi ça sert ?
                                    <br />
                                    Pourquoi c'est important ?
                                </p>
                            </div>
                            <div aria-hidden="true" class="panel" role="tabpanel" aria-labelledby="three" tabindex="-1" id="panel-3">
                                <h4>ER</h4>
                                <p>
                                    <i>Information à fournir par la MOA</i><br /><br />
                                    Qu'est ce que c'est ?
                                    <br />
                                    A quoi ça sert ?
                                    <br />
                                    Pourquoi c'est important ?
                                </p>
                            </div>
                            <div aria-hidden="true" class="panel" role="tabpanel" aria-labelledby="four" tabindex="-1" id="panel-4">
                                <h4>Autre</h4>
                                <p>
                                    <i>Information à fournir par la MOA</i><br /><br />
                                    Qu'est ce que c'est ?
                                    <br />
                                    A quoi ça sert ?
                                    <br />
                                    Pourquoi c'est important ?
                                </p>
                            </div>
                            <div aria-hidden="true" class="panel" role="tabpanel" aria-labelledby="five" tabindex="-1" id="panel-5">
                                <h4>Autre</h4>
                                <p>
                                    <i>Information à fournir par la MOA</i><br /><br />
                                    Qu'est ce que c'est ?
                                    <br />
                                    A quoi ça sert ?
                                    <br />
                                    Pourquoi c'est important ?
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<script>
    var $navlist = $('#navlist');
    var $tabContainer = $('#tab-container');
    var $panels = $('#panels');

    $navlist.on('keydown', 'li a', function (keyVent) {
    var arrows = [37, 38, 39, 40];
    var which = keyVent.which;
    var target = keyVent.target;
    if ($.inArray(which, arrows) > -1) {
        var adjacentTab = findAdjacentTab(target, $navlist, which);

        if (adjacentTab) {
        keyVent.preventDefault();
        adjacentTab.focus();
        // if desired behavior is that when tab receives focus -> make it the active tab:
        setActiveAndInactive(adjacentTab, $navlist);
        }
    } else if (which === 13 || which === 32) { // ENTER |or| SPACE
        keyVent.preventDefault(); // don't scroll the page around...
        target.click();
    } else if (which === 34) { // PAGE DOWN
        keyVent.preventDefault(); // don't scroll the page
        var assocPanel = $('#' + this.getAttribute('aria-controls'));
        if (assocPanel) {
        assocPanel.focus();
        }
    }
    });

    $(document.body).on('keydown', '.panel', function (e) {
    if (e.which === 33) { // PAGE UP
        e.preventDefault(); // don't scroll
        var activeTab = $navlist.find('li.active a')[0];
        if (activeTab) {
        activeTab.focus();
        }
    }
    });

    // click support
    $navlist.on('click', 'li a', function () {
    setActiveAndInactive(this, $navlist);
    });

    function findAdjacentTab(startTab, $list, key) {
    var dir = (key === 37 || key === 38) ? 'prev' : 'next';
    var adjacentTab = (dir === 'prev') ?
                        $(startTab.parentNode).prev()[0] :
                        $(startTab.parentNode).next()[0];

    if (!adjacentTab) {
        var allTabs = $list.find('li');
        if (dir === 'prev') {
        adjacentTab = allTabs[allTabs.length - 1];
        } else {
        adjacentTab = allTabs[0];
        }
    }

    return $(adjacentTab).find('a')[0];
    }

    function setActiveAndInactive(newActive, $list) {
    $list.find('li').each(function () {
        var assocPanelID = $(this)
                            .find('a')
                            .first()
                            .attr('aria-controls');
        var anchor = $(this).find('a')[0];

        if (this !== newActive.parentNode) {
        $(this).removeClass('active');
        anchor.tabIndex = -1;
        anchor.setAttribute('aria-selected', 'false');
        $('#' + assocPanelID)
            .removeClass('current')
            .attr('aria-hidden', 'true');
        } else {
        $(this).addClass('active');
        anchor.tabIndex = 0;
        anchor.setAttribute('aria-selected', 'true');
        $('#' + assocPanelID)
            .addClass('current')
            .removeAttr('aria-hidden');
        }

    });
    }

    // initial configuration based on window's width
    var isAccordionView = false;
    var isTabsView = false;

    determineView();

    (function($, sr){
    var debounce = function (func, threshold, execAsap) {
        var timeout;

        return function debounced () {
            var obj = this, args = arguments;
            function delayed () {
                if (!execAsap)
                    func.apply(obj, args);
                timeout = null;
            }

            if (timeout)
                clearTimeout(timeout);
            else if (execAsap)
                func.apply(obj, args);

            timeout = setTimeout(delayed, threshold || 100);
        };
    };
    // smartresize
    jQuery.fn[sr] = function(fn){  return fn ? this.bind('resize', debounce(fn)) : this.trigger(sr); };

    })(jQuery,'smartresize');


    // RESIZE EVENT:
    $(window).smartresize(determineView);


    function determineView() {
    var winWidth = $(window).width();

    if (winWidth <= 991 && !isAccordionView) { // SHOW ACCORDION VIEW
        // switch to the accordion view
        $tabContainer
        .removeClass('tabs-view')
        .addClass('accordion-view');

        // fix the markup to be more suited for accordions
        $panels.find('.panel').each(function () {
        var panelID = this.id;
        var assocLink = panelID && $('#navlist a[aria-controls="' + panelID + '"]')[0];
        if (assocLink) {
            $(assocLink.parentNode).append(this);
        }
        });

        isAccordionView = true;
        isTabsView = false;
    } else if (winWidth > 991 && !isTabsView) { // SHOW TABS VIEW
        var wasAccordion = $tabContainer.hasClass('accordion-view');
        // switch to the tabs view
        $tabContainer
        .removeClass('accordion-view')
        .addClass('tabs-view');

        if (wasAccordion) {
        $navlist.find('.panel').each(function () {
            $panels.append(this);
        });
        }

        isTabsView = true;
        isAccordionView = false;

        
        $( ".expand" ).click(function() {
        $("#panels").css("display", "block");
        });

        $("#panels").css({'height':($("#navlist").height()+'px')});

        $(".numberlist .tabs-view .panel.current").css({'height':($("#panels").height()+'px')});
    }
    }



var $menu = $('#panels');

$(document).mouseup(function (e) {
   if (!$menu.is(e.target) // if the target of the click isn't the container...
   && $menu.has(e.target).length === 0) // ... nor a descendant of the container
   {
     $menu.hide();
  }
 });
</script>

<?php include ('contact-area.php'); ?>

